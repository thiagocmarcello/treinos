<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="../tamplate/template.xhtml">
	<ui:define name="content">
		<p:tabView id="academiaTB" activeIndex="#{academiaController.indexTab}" styleClass="sem-bordas">
			<p:tab title="Cadastrar" >
				<h:form>
					<p:panelGrid columns="2" id="personalPG" styleClass="semBorda">
						<p:outputLabel value="Nome:" />
						<p:inputText id="nomeAcademia" required="true"
							requiredMessage="Campo Nome obrigatório!"
							value="#{academiaController.academia.nome}" />
							<p:outputLabel value="CNPJ:" />
						<p:inputText value="#{academiaController.academia.cnpj}" />
						<p:outputLabel value="Rua:" />
						<p:inputText value="#{academiaController.endereco.rua}" />
						<p:outputLabel value="Numero: " />
						<p:inputText value="#{academiaController.endereco.numero}" />
						<p:outputLabel value="Complemento: " />
						<p:inputText value="#{academiaController.endereco.complemento}" />
						<p:outputLabel value="Bairro:" />
						<p:inputText value="#{academiaController.endereco.bairro}" />
						<p:outputLabel value="Telefone:" />
						<p:inputText value="#{academiaController.endereco.telefone01}"
							name="telefone" onkeyup="mascara( this, mtel );" maxlength="15" />
						<p:outputLabel value=" Celular:" />
						<p:inputText value="#{academiaController.endereco.celular}"
							name="celular" onkeyup="mascara(this, mtel);" maxlength="15" />
						<p:outputLabel value="Estado:" />
						<p:selectOneMenu id="idEstado"
							value="#{academiaController.estadoSelecionado}">
							<f:selectItem itemLabel="Selecione..." />
							<f:selectItems value="#{academiaController.estados}" var="estado"
								itemValue="#{estado.value}" itemLabel="#{estado.label}" />
							<p:ajax update="idCidade" event="change"
								listener="#{academiaController.carregarCidades()}" />
						</p:selectOneMenu>
						<p:outputLabel value="Cidade:" />
						<p:selectOneMenu id="idCidade"
							value="#{academiaController.cidadeSelecionado}">
							<f:selectItem itemLabel="Selecione..." />
							<f:selectItems value="#{academiaController.cidades}" var="cidade"
								itemValue="#{cidade.value}" itemLabel="#{cidade.label}" />
						</p:selectOneMenu>
						<p:commandButton action="#{academiaController.salvar()}"
							value="Salvar" update=":academiaTB :growl" />
					</p:panelGrid>
				</h:form>
			</p:tab>
			<!-- *** CONSULTAR *** -->
			<p:tab title="Consultar">
				<h:panelGrid>
					<h:form>
						<p:dataTable id="tablePessoa"
							value="#{academiaController.academias}" var="p" rows="6"
							emptyMessage="sem registros" paginator="true">
							<p:column>
								<f:facet name="header">
									<h:outputText value="Nome" />
								</f:facet>
								<h:outputText value="#{p.nome}" />
							</p:column>
							<p:column>
								<f:facet name="header">
									<h:outputText value="Ações" />
								</f:facet>
								<h:commandButton action="#{academiaController.deletar(p)}"
									value="Remover" />
								<h:commandButton action="#{academiaController.editar(p)}"
									value="Alterar" />
							</p:column>
						</p:dataTable>
					</h:form>
				</h:panelGrid>
			</p:tab>
		</p:tabView>
	</ui:define>
</ui:composition>
</html>